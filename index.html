<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RevClear Demo</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <div class="hero">
      <h1>RevClear <span class="grad">Demo</span></h1>
      <p><strong>Flow:</strong> Clinician Signup → Login → Patient Registration</p>

      <div class="nav mt" id="nav">
        <a class="btn" href="signup.html">Clinician Signup</a>
        <a class="btn btn-outline" id="loginBtn" href="login.html">Login</a>
        <a class="btn btn-outline" href="patient.html">Patient Registration</a>
        <!-- If you still want the full viewer page, keep this link.
             Or delete this line to hide it completely. -->
        <a class="btn btn-outline" href="manage.html">Open Full Data Viewer</a>
        <button class="btn btn-danger" id="logoutBtn" style="display:none">Logout</button>
      </div>

      <div class="mt success hidden" id="flash"></div>
    </div>
  </div>

  <script>
    // show success/info banner from ?msg=...
    const params = new URLSearchParams(location.search);
    const msg = params.get('msg');
    if (msg) {
      const el = document.getElementById('flash');
      el.textContent = msg;
      el.classList.remove('hidden');
    }

    // toggle Login/Logout based on session
    const session = JSON.parse(localStorage.getItem('session') || 'null');
    const logoutBtn = document.getElementById('logoutBtn');
    const loginBtn = document.getElementById('loginBtn');
    if (session) {
      logoutBtn.style.display = 'inline-block';
      loginBtn.style.display = 'none';
    }
    logoutBtn?.addEventListener('click', () => {
      localStorage.removeItem('session');
      location.href = 'index.html?msg=' + encodeURIComponent('Logged out.');
    });
  </script>
</body>
</html>

