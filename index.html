<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>RevClear Demo</title>
  <link rel="stylesheet" href="styles.css"/>
  <meta name="robots" content="noindex,nofollow">
  <style>
    /* tiny inline spinner so page isn't empty during redirect */
    .center { display:flex; align-items:center; justify-content:center; height:100vh; }
    .dot { width:10px; height:10px; margin:4px; border-radius:50%; background:#60a5fa; animation:b 1.1s infinite alternate; }
    .dot:nth-child(2){ animation-delay: .15s } .dot:nth-child(3){ animation-delay: .3s }
    @keyframes b { to { transform: translateY(-6px); opacity:.6 } }
  </style>
</head>
<body>
  <div class="center" aria-live="polite" aria-busy="true">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>

  <script>
    // Step logic:
    // 1) If no clinicians exist yet -> go to Signup
    // 2) If clinicians exist but not logged in -> go to Login
    // 3) If logged in -> go to Patient Registration
    (function () {
      try {
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const session = JSON.parse(localStorage.getItem('session') || 'null');

        if (!users || users.length === 0) {
          // Step 1: no users yet → signup first
          location.replace('signup.html');
          return;
        }
        if (!session) {
          // Step 2: have users but not logged in → login
          location.replace('login.html');
          return;
        }
        // Step 3: logged in → patient registration
        location.replace('patient.html');
      } catch (e) {
        // If something is wrong with localStorage, start from signup
        location.replace('signup.html');
      }
    })();
  </script>
</body>
</html>

